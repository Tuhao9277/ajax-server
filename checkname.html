<!DOCTYPE html>
<html>

	<head>
		<meta charset="utf-8" />
		<title></title>
		<body>
			姓名:<input id="username" type="text" onblur="ajax()"/><span class="tip"></span><br>
			密码:<input type="password"/><br>
			<button onclick="check()">注册</button>
			<p>
				<marquee direction="">滚来滚去</marquee>
			</p>
		</body>
		<script>
				//http://localhost:9090/checkname?username=abc
				let Input = document.getElementById("username");
				let tip = document.getElementsByClassName("tip")[0];
				Input.addEventListener("input", function(){
					tip.innerText = "";
				})
				
				function ajax(){
					let xhr = new XMLHttpRequest();
					xhr.open("get", `checkname?username=${Input.value}`);
					xhr.send();
					
					/* xhr.open("post", `checkname`);
					xhr.setRequestHeader("Content-Type","application/x-www-form-urlencoded");
					xhr.send("username="+Input.value);
					 */
					
					// xhr.onreadystatechange = function(){
					// 	if(xhr.readyState==4) {
					// 		
					// 	} 
					// }
					
					xhr.onload = function(){
						if(xhr.response==1) {
							tip.innerText = "用户名太受欢迎了，请换一个"
						}
					}
				}
			</script>
	

</html>